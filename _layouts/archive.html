---
layout: base
---
{%- comment -%}
  Build a unique months array from items (newest → oldest)
{%- endcomment -%}
{%- assign entries = site.archive | sort: "date" | reverse -%}
{%- assign months = "" | split: "" -%}
{%- for item in entries -%}
  {%- assign label = item.date | date: "%Y/%m" -%}
  {%- assign id    = item.date | date: "%Y%m"   -%}  {# e.g., 202509 #}
  {%- unless months contains id -%}
    {%- assign months = months | push: id -%}
  {%- endunless -%}
{%- endfor -%}

<main class="is-archive" aria-label="Archive">
  <!-- Months ribbon (clickable anchors) -->
  <div class="months">
    {%- for id in months -%}
      {%- assign y  = id | slice: 0,4 -%}
      {%- assign m  = id | slice: 4,2 -%}
      {%- assign label = y | append: "/" | append: m -%}
      <a href="#y{{ id }}">{{ label }}</a>
    {%- endfor -%}
  </div>

  <!-- Stream (newest → oldest) -->
  <section class="story">
    {%- assign prev = "" -%}
    {%- for item in entries -%}
      {%- assign month_id = item.date | date: "%Y%m" -%}
      {%- assign label    = item.date | date: "%Y/%m" -%}

      {%- if month_id != prev -%}
        <h2 id="y{{ month_id }}">{{ label }}</h2>
        {%- assign prev = month_id -%}
      {%- endif -%}

      {{ item.content }}  <!-- archive_item layout renders content/figures -->
    {%- endfor -%}
  </section>
</main>
