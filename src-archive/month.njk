---
layout: base.njk
title: Archive
htmlClass: is-archive

# one page per month: /archive/posts/YYYY-MM/
pagination:
  data: collections.postsByMonth
  size: 1
  alias: month

# IMPORTANT: month pages are under /posts/YYYY-MM/ in the build
permalink: "posts/{{ month.ym }}/"
---

{% set groups = collections.postsByMonth %}

{# Fixed start exactly like your local test:
   always begin at 2025-09 and show 12 months (2 rows × 6 cols).
   This yields: 09/2025 10/2025 11/2025 ... left → right. #}
{% set months = "2025-09" | monthWindowFixed(12) %}

<main>
  <h1>Archive</h1>

 <div class="content">
    <nav class="months" aria-label="Months">
      {% for ym in months %}
        {# does this month have posts? #}
        {% set has = false %}
        {% for g in groups %}{% if g.ym == ym %}{% set has = true %}{% endif %}{% endfor %}

        {% if has %}
          <a class="month"
             href="{{ ('/posts/' + ym + '/') }}"
             {% if ym == month.ym %}aria-current="true"{% endif %}>
            {{ ym | monthLabel }}
          </a>
        {% else %}
          <span class="month" aria-disabled="true">{{ ym | monthLabel }}</span>
        {% endif %}
      {% endfor %}
    </nav>
  </div>

  {# === This month’s posts (full content inline) === #}
  <div class="content">
    {% if month.items and month.items.length %}
      {% for post in month.items %}
        <article>
          <div class="chip">{{ post.date | dateChip }}</div>

          {% if post.data.title %}
            <h3 class="entry-title">{{ post.data.title }}</h3>
          {% endif %}

          {% if post.data.intro %}
            <p class="entry-intro">{{ post.data.intro }}</p>
          {% endif %}

          {% if post.data.figure %}
            <figure>
              <img src="{{ post.data.figure }}" alt="">
              {% if post.data.caption %}
                <figcaption>{{ post.data.caption }}</figcaption>
              {% endif %}
            </figure>
          {% endif %}

          {{ post.content | safe }}  {# Eleventy v3 uses `content` #}
        </article>
      {% endfor %}
    {% else %}
      <p class="note">No posts in this month yet.</p>
    {% endif %}

    <div class="footer">
      This is a live archive of works, thoughts, screenshots. Nothing final, the process.
    </div>
  </div>
</main>
