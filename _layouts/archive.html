---
layout: base
---
{% comment %} Build newestâ†’oldest list of months as YYYY-MM {% endcomment %}
{% assign entries = site.archive | sort: "date" | reverse %}
{% assign months  = "" | split: "" %}
{% for item in entries %}
  {% assign label = item.date | date: "%Y-%m" %}
  {% unless months contains label %}
    {% assign months = months | push: label %}
  {% endunless %}
{% endfor %}

<main>
  <h1>Archive</h1>

  <nav class="months" aria-label="Months">
    {% for m in months %}
      <a href="#{{ m }}"{% if forloop.first %} aria-current="true"{% endif %}>
        {{ m | replace: "-", "/" }}
      </a>
    {% endfor %}
  </nav>

  {% comment %} Stream grouped by month (matches your old HTML) {% endcomment %}
  {% assign current = "" %}
  {% for item in entries %}
    {% assign month_id = item.date | date: "%Y-%m" %}
    {% if month_id != current %}
      {% if current != "" %}</div></div>{% endif %}
      <div id="{{ month_id }}" class="month">
        <div class="story">
      {% assign current = month_id %}
    {% endif %}

    {{ item.content }}  {# each item (article/figures) prints here #}

  {% endfor %}
  {% if current != "" %}</div></div>{% endif %}

  <div class="footer">
    This is a live archive of works, thoughts, screenshots. Nothing final, the process.
    Code: MIT. Text &amp; images: CC BY-NC-ND 4.0.
  </div>
</main>
